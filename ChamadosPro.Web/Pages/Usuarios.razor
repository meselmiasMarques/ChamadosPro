@page "/usuarioLista"
@using ChamadosPro.Web.Responses
@using ChamadosPro.Web.Services
@inject UsuarioService _usuarioService


<MudDataGrid Items="@usuarios" Filterable="false" SortMode="@SortMode.None" Groupable="false"  Class="mt-6">
    <Columns>
        <PropertyColumn Property="x => x.Id"/>
        <PropertyColumn Property="x => x.Nome"/>
        <PropertyColumn Property="x => x.Email"/>
        <PropertyColumn Property="x => x.Perfil"/>
        <TemplateColumn CellClass="d-flex justify-end">
            <CellTemplate>
                <MudStack Row>
                    <MudRating Size="@Size.Small" SelectedValue="@context.Item.Id"/>
                    <MudButton Size="@Size.Small" Variant="@Variant.Filled" Color="@Color.Primary">Hire</MudButton>
                </MudStack>
            </CellTemplate>
        </TemplateColumn>
    </Columns>
</MudDataGrid>

@code {
    private IEnumerable<UsuarioResponse>? usuarios;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            usuarios = await _usuarioService.GetUsuariosAsync();
        }
        catch (Exception ex)
        {
            Console.WriteLine("Erro ao carregar usu√°rios: " + ex.Message);
        }
    }

}